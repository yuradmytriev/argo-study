# =============================================================================
# STAGING OVERLAY - Pre-production environment
# =============================================================================
# Mirrors production settings but with fewer replicas.
# Used for final testing before promoting to prod.
#
# Preview: kubectl kustomize environments/staging
# Apply:   kubectl apply -k environments/staging
# =============================================================================

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- ../base

commonLabels:
  environment: staging

namespace: gitops-demo-staging

patches:
- path: patch-replicas.yaml

configMapGenerator:
- name: app-config
  behavior: replace
  literals:
  - APP_VERSION=1.0.0
  - APP_ENV=staging
  - LOG_LEVEL=info
